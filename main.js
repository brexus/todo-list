(()=>{"use strict";class t{constructor(t,e,n,s){this.title=t,this.description=e,this.dueDate=n,this.priority=s}}const e=(()=>{let t=[];return{addProject:e=>{t.push(e),n.updateStorage()},getProjectList:()=>t,removeProject:e=>{t=t.filter((t=>e!==t)),n.updateStorage()}}})(),n={updateStorage:()=>{localStorage.clear(),localStorage.setItem("todo-list",JSON.stringify(e.getProjectList()))},loadStorage:()=>{let n=JSON.parse(localStorage.getItem("todo-list"));if(null!==n)for(let d=0;d<n.length;d++){e.addProject(new s(n[d].title));for(let s=0;s<n[d].tasksList.length;s++)e.getProjectList()[d].addTask(new t(n[d].tasksList[s].title,n[d].tasksList[s].description,n[d].tasksList[s].dueDate,n[d].tasksList[s].priority))}}};class s{constructor(t){this.title=t,this.tasksList=[]}addTask(t){this.tasksList.push(t),this.tasksList.sort((function(t,e){return new Date(t.dueDate)-new Date(e.dueDate)})),n.updateStorage()}removeTask(t){this.tasksList=this.tasksList.filter((e=>e!==t)),n.updateStorage()}getTaskList=()=>this.tasksList}(()=>{let d;document.getElementById("todo-list");const l=()=>{o(),a(),r(),m(),E(),c()},i=()=>{const t=document.getElementById("main-tasks"),e=document.querySelector("#main-content > h2");t.innerHTML="",e.innerHTML="",u(),g(),L(),B(),document.getElementById("tasks-legend").innerHTML=""},o=()=>{document.getElementById("projects-list").innerHTML=""},a=()=>{document.getElementById("aside"),document.getElementById("projects-title");const t=document.getElementById("projects-list");let n=e.getProjectList();for(let e=0;e<n.length;e++){let s=document.createElement("button");s.innerHTML=`<div style='width:100%; display: flex; flex-direction: row; justify-content: flex-start; align-items: center;'>\n                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>format-list-checkbox</title><path d="M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z" /></svg>\n                                    ${n[e].title}\n                                </div>\n\n                                <svg class='project-close' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>close</title><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>\n                                `,t.appendChild(s)}},c=()=>{const t=document.querySelectorAll(".project-close");for(let n=0;n<t.length;n++)t[n].addEventListener("click",(()=>{e.removeProject(e.getProjectList()[n]),l(),i()}))},r=()=>{const t=document.getElementById("add-project-window");t.style.display="none",t.classList.add("disable"),document.getElementById("project-title").value=""},m=()=>{document.getElementById("add-project-btn").style.display="flex"},u=()=>{const t=document.getElementById("add-task-window");t.style.display="none",t.classList.add("disable"),document.getElementById("task-title").value="",document.getElementById("task-description").value=""},y=()=>{document.getElementById("add-task-btn").style.display="flex"},g=()=>{document.getElementById("add-task-btn").style.display="none"},L=()=>{document.querySelector("#main-content > div.separator").style.display="none"},p=()=>{const t=document.getElementById("add-project-btn"),n=document.getElementById("add-project-window");t.addEventListener("click",(()=>{n.classList.contains("disable")&&((()=>{const t=document.getElementById("add-project-window");t.style.display="flex",t.classList.remove("disable")})(),document.getElementById("add-project-btn").style.display="none")}));const d=document.querySelector(".add-project-buttons-control > .btn-success");document.querySelector(".add-project-buttons-control > .btn-fail").addEventListener("click",(()=>{"flex"===n.style.display&&(r(),m())}));const o=document.getElementById("project-title");let a;d.addEventListener("click",(()=>{if(""!==o.value.trim()){const t=e.getProjectList();if(a=0,t.forEach((t=>{t.title.trim()!==o.value.trim()&&a++})),a===t.length){const t=new s(o.value);e.addProject(t),E(),l(),i()}else alert("The title is already taken")}else alert("The title cannot be empty");a=0}))},k=()=>{const e=document.getElementById("add-task-btn"),n=document.getElementById("add-task-window");e.addEventListener("click",(()=>{n.classList.contains("disable")&&((()=>{const t=document.getElementById("add-task-window");t.style.display="flex",t.classList.remove("disable")})(),g())}));const s=document.querySelector(".add-task-buttons-control > .btn-success");document.querySelector(".add-task-buttons-control > .btn-fail").addEventListener("click",(()=>{"flex"===n.style.display&&(u(),y())}));const l=document.getElementById("task-title"),i=document.getElementById("task-description"),o=document.getElementById("task-due-date");s.addEventListener("click",(()=>{""!==l.value.trim()?(d.getTaskList(),d.addTask(new t(l.value,i.value,o.value,!1)),h()):alert("The title cannot be empty")}))},E=()=>{const t=document.querySelectorAll("#projects-list > button > div");for(let n=0;n<t.length;n++)t[n].addEventListener("click",(()=>{d=e.getProjectList()[n];for(let e=0;e<t.length;e++)t[e].classList.remove("active"),t[e].style.fontWeight="normal";t[n].classList.add("active"),t[n].style.fontWeight="600",h()}))},h=()=>{const t=document.querySelector("#main-content > h2"),e=document.getElementById("main-tasks"),n=document.getElementById("tasks-legend");i(),t.innerText=d.title;let s=d.getTaskList();n.innerHTML="<h4>Title:</h4><h4>Due date:</h4>",s.forEach((t=>{let n=document.createElement("button");n.style.display="flex",n.style.flexDirection="row",n.id="task-btn",n.innerHTML=`<input type='checkbox' class='task-checkbox'>\n                                <span class='task-date-container' style='display:flex; flex-direction: row; justify-content: space-between; width: 100%;'>\n                                    <span>${t.title}</span>\n                                    <span>${t.dueDate}</span>\n                                </span>`,e.appendChild(n)})),document.querySelector("#main-content > div.separator").style.display="flex",y(),v(),w()},v=()=>{let t=document.querySelectorAll("#task-btn > input");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{let t=d.getTaskList()[e];d.removeTask(t),h()}))},w=()=>{const t=document.querySelectorAll(".task-date-container"),e=(document.getElementById("details-window"),document.getElementById("title-detail-window")),n=document.getElementById("due-date-detail-window"),s=document.getElementById("description-detail-window");for(let l=0;l<t.length;l++)t[l].addEventListener("click",(()=>{I();let t=d.getTaskList()[l];e.innerText=`'${t.title}'`,n.innerText=`${t.dueDate}`,s.innerText=`'${t.description}'`}))},I=()=>{document.getElementById("details-window").style.display="flex",document.getElementById("main-aside-container").classList.add("disable-background")},B=()=>{document.getElementById("details-window").style.display="none",document.getElementById("main-aside-container").classList.remove("disable-background")},f=()=>{document.getElementById("btn-description-close").addEventListener("click",(()=>{B()}))},b=()=>{const t=document.getElementById("hamburger"),e=document.getElementById("aside");t.addEventListener("click",(()=>{e.classList.contains("active")?(H(),t.innerHTML='<title>menu</title><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />'):(j(),t.innerHTML='<title>close</title><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />')}))},H=()=>{const t=document.getElementById("aside");t.classList.remove("active"),t.style.animation="slideOut 300ms",t.style.display="none"},j=()=>{const t=document.getElementById("aside");t.classList.add("active"),t.style.display="flex",t.style.animation="slideIn 300ms"};return{startTodoList:()=>{n.loadStorage(),l(),i(),k(),p(),f(),b()}}})().startTodoList()})();