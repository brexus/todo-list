(()=>{"use strict";class e{constructor(e,t,n,s){this.title=e,this.description=t,this.dueDate=n,this.priority=s}}class t{constructor(e){this.title=e,this.tasksList=[]}addTask(e){this.tasksList.push(e)}removeTask(e){this.tasksList=this.tasksList.filter((t=>t!==e))}getTaskList=()=>this.tasksList}const n=(()=>{let e=[];return{addProject:t=>{e.push(t)},getProjectList:()=>e,removeProject:t=>{e=e.filter((e=>t!==e))}}})();(()=>{let s;document.getElementById("todo-list");const d=()=>{a(),i(),o(),c(),k()},l=()=>{const e=document.getElementById("main-tasks"),t=document.querySelector("#main-content > h2");e.innerHTML="",t.innerHTML="",r(),u(),y(),B(),document.getElementById("tasks-legend").innerHTML=""},a=()=>{document.getElementById("projects-list").innerHTML=""},i=()=>{document.getElementById("aside"),document.getElementById("projects-title");const e=document.getElementById("projects-list");let t=n.getProjectList();for(let n=0;n<t.length;n++){let s=document.createElement("button");s.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>format-list-checkbox</title><path d="M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z" /></svg> ${t[n].title}`,e.appendChild(s)}},o=()=>{const e=document.getElementById("add-project-window");e.style.display="none",e.classList.add("disable"),document.getElementById("project-title").value=""},c=()=>{document.getElementById("add-project-btn").style.display="flex"},r=()=>{const e=document.getElementById("add-task-window");e.style.display="none",e.classList.add("disable")},m=()=>{document.getElementById("add-task-btn").style.display="flex"},u=()=>{document.getElementById("add-task-btn").style.display="none"},y=()=>{document.querySelector("#main-content > div.separator").style.display="none"},g=()=>{const e=document.getElementById("add-project-btn"),s=document.getElementById("add-project-window");e.addEventListener("click",(()=>{s.classList.contains("disable")&&((()=>{const e=document.getElementById("add-project-window");e.style.display="flex",e.classList.remove("disable")})(),document.getElementById("add-project-btn").style.display="none")}));const a=document.querySelector(".add-project-buttons-control > .btn-success");document.querySelector(".add-project-buttons-control > .btn-fail").addEventListener("click",(()=>{"flex"===s.style.display&&(o(),c())}));const i=document.getElementById("project-title"),r=n.getProjectList();let m=0;a.addEventListener("click",(()=>{if(""!==i.value.trim())if(r.forEach((e=>{e.title.trim()!==i.value.trim()&&m++})),m===r.length){const e=new t(i.value);n.addProject(e),k(),d(),l()}else alert("The title is already taken");else alert("The title cannot be empty");m=0}))},p=()=>{const t=document.getElementById("add-task-btn"),n=document.getElementById("add-task-window");t.addEventListener("click",(()=>{n.classList.contains("disable")&&((()=>{const e=document.getElementById("add-task-window");e.style.display="flex",e.classList.remove("disable")})(),u())}));const d=document.querySelector(".add-task-buttons-control > .btn-success");document.querySelector(".add-task-buttons-control > .btn-fail").addEventListener("click",(()=>{"flex"===n.style.display&&(r(),m())}));const l=document.getElementById("task-title"),a=document.getElementById("task-description"),i=document.getElementById("task-due-date");d.addEventListener("click",(()=>{if(""!==l.value.trim()){let t=s.getTaskList(),n=0;t.forEach((e=>{e.title.trim()!==l.value.trim()&&n++})),n===t.length?(s.addTask(new e(l.value,a.value,i.value,!1)),E()):alert("The title is already taken")}else alert("The title cannot be empty");control=0}))},k=()=>{const e=document.querySelectorAll("#projects-list > *");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(()=>{s=n.getProjectList()[t];for(let t=0;t<e.length;t++)e[t].classList.remove("active"),e[t].style.fontWeight="normal";e[t].classList.add("active"),e[t].style.fontWeight="600",E()}))},E=()=>{const e=document.querySelector("#main-content > h2"),t=document.getElementById("main-tasks"),n=document.getElementById("tasks-legend");l(),e.innerHTML=s.title;let d=s.getTaskList();n.innerHTML="<h4>Title:</h4><h4>Due date:</h4>",d.forEach((e=>{let n=document.createElement("button");n.style.display="flex",n.style.flexDirection="row",n.id="task-btn",n.innerHTML=`<input type='checkbox' class='task-checkbox'>\n                                <span class='task-date-container' style='display:flex; flex-direction: row; justify-content: space-between; width: 100%;'>\n                                    <span>${e.title}</span>\n                                    <span>${e.dueDate}</span>\n                                </span>`,t.appendChild(n)})),document.querySelector("#main-content > div.separator").style.display="flex",m(),L(),h()},L=()=>{let e=document.querySelectorAll("#task-btn > input");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(()=>{let e=s.getTaskList()[t];s.removeTask(e),E()}))},h=()=>{const e=document.querySelectorAll(".task-date-container"),t=(document.getElementById("details-window"),document.getElementById("title-detail-window")),n=document.getElementById("due-date-detail-window"),d=document.getElementById("description-detail-window");for(let l=0;l<e.length;l++)e[l].addEventListener("click",(()=>{w();let e=s.getTaskList()[l];t.innerText=`'${e.title}'`,n.innerText=`${e.dueDate}`,d.innerText=`'${e.description}'`}))},w=()=>{document.getElementById("details-window").style.display="flex",document.getElementById("main-aside-container").classList.add("disable-background")},B=()=>{document.getElementById("details-window").style.display="none",document.getElementById("main-aside-container").classList.remove("disable-background")},b=()=>{document.getElementById("btn-description-close").addEventListener("click",(()=>{B()}))};return{startTodoList:()=>{const s=new t("Test 1"),a=new e("task 1","Lorem apsem impum alerte","2023-07-29",!1);s.addTask(a);const i=new e("task 2","sienaaaaww","2023-08-05",!1);s.addTask(i),n.addProject(s),d(),l(),p(),g(),b()}}})().startTodoList()})();